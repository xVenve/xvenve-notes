\documentclass[12pt, twoside, openright]{report} % Fuente a 12pt, formato doble página y chapter a la derecha
\raggedbottom % No ajustar el contenido con un salto de página

% MÁRGENES: 2,5 cm sup. e inf.; 3 cm izdo. y dcho.
\usepackage[
a4paper,
vmargin=2.5cm,
hmargin=3cm
]{geometry}

% INTERLINEADO: Estrecho (6 ptos./interlineado 1,15) o Moderado (6 ptos./interlineado 1,5)
\renewcommand{\baselinestretch}{1.15}
\parskip=6pt

% DEFINICIÓN DE COLORES para portada y listados de código
\usepackage[table]{xcolor}
\definecolor{azulUC3M}{RGB}{0,0,102}
\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}

% Soporte para GENERAR PDF/A
\usepackage{etoolbox}
\makeatletter
\@ifl@t@r\fmtversion{2021-06-01}%
 {\AddToHook{package/after/xmpincl}
   {\patchcmd\mcs@xmpincl@patchFile{\if\par}{\ifx\par}{}{\fail}}}{}
\makeatother
\usepackage[a-1b]{pdfx}

% ENLACES
\usepackage{hyperref}
\hypersetup{colorlinks=true,
  linkcolor=black, % enlaces a partes del documento (p.e. índice) en color negro
  urlcolor=blue} % enlaces a recursos fuera del documento en azul

% Añadir pdfs como partes del documento
\usepackage{pdfpages}

% Quitar la indentación de principio de los párrafos
\setlength{\parindent}{0em}

% EXPRESIONES MATEMÁTICAS
\usepackage{amsmath,amssymb,amsfonts,amsthm}

\usepackage{txfonts} 
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

% Insertar gráficas y fotos
\usepackage{tikz}
\usepackage{pgfplots}

\usepackage[spanish, es-tabla]{babel} 
\usepackage[babel, spanish=spanish]{csquotes}
\AtBeginEnvironment{quote}{\small}

% diseño de PIE DE PÁGINA
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[LE,RO]{\thepage}
\fancypagestyle{plain}{\pagestyle{fancy}}

% DISEÑO DE LOS TÍTULOS de las partes del trabajo (capítulos y epígrafes o subcapítulos)
\usepackage{titlesec}
\usepackage{titletoc}
\titleformat{\chapter}[block]
{\large\bfseries\filcenter}
{\thechapter.}
{5pt}
{\MakeUppercase}
{}
\titlespacing{\chapter}{0pt}{0pt}{*3}
\titlecontents{chapter}
[0pt]                                               
{}
{\contentsmargin{0pt}\thecontentslabel.\enspace\uppercase}
{\contentsmargin{0pt}\uppercase}                        
{\titlerule*[.7pc]{.}\contentspage}                 

\titleformat{\section}
{\bfseries}
{\thesection.}
{5pt}
{}
\titlecontents{section}
[5pt]                                               
{}
{\contentsmargin{0pt}\thecontentslabel.\enspace}
{\contentsmargin{0pt}}
{\titlerule*[.7pc]{.}\contentspage}

\titleformat{\subsection}
{\normalsize\bfseries}
{\thesubsection.}
{5pt}
{}
\titlecontents{subsection}
[10pt]                                               
{}
{\contentsmargin{0pt}                          
  \thecontentslabel.\enspace}
{\contentsmargin{0pt}}                        
{\titlerule*[.7pc]{.}\contentspage}  

% DISEÑO DE TABLAS.
\usepackage{multirow} % permite combinar celdas 
\usepackage{caption} % para personalizar el título de tablas y figuras
\usepackage{floatrow} % utilizamos este paquete y sus macros \ttabbox y \ffigbox para alinear los nombres de tablas y figuras de acuerdo con el estilo definido. Para su uso ver archivo de ejemplo 
\usepackage{array} % con este paquete podemos definir en la siguiente línea un nuevo tipo de columna para tablas: ancho personalizado y contenido centrado
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
\DeclareCaptionFormat{upper}{#1#2\uppercase{#3}\par}

% Diseño de tabla para ingeniería
\captionsetup[table]{
  format=hang,
  name=Tabla,
  justification=centering,
  labelsep=colon,
  width=.75\linewidth,
  labelfont=small,
  font=small,
}

% DISEÑO DE FIGURAS.
\usepackage{graphicx}
\graphicspath{{img/}} %ruta a la carpeta de imágenes

% Diseño de figuras para ingeniería
\captionsetup[figure]{
  format=hang,
  name=Fig.,
  singlelinecheck=off,
  labelsep=colon,
  labelfont=small,
  font=small    
}

% NOTAS A PIE DE PÁGINA
\usepackage{chngcntr} % Para numeración continua de las notas al pie
\counterwithout{footnote}{chapter}

% LISTADOS DE CÓDIGO
% soporte y estilo para listados de código. Más información en https://es.wikibooks.org/wiki/Manual_de_LaTeX/Listados_de_código/Listados_con_listings
\usepackage{listings}

% definimos un estilo de listings
\lstdefinestyle{estilo}{ frame=Ltb,
  framerule=0pt,
  aboveskip=0.5cm,
  framextopmargin=3pt,
  framexbottommargin=3pt,
  framexleftmargin=0.4cm,
  framesep=0pt,
  rulesep=.4pt,
  backgroundcolor=\color{gray97},
  rulesepcolor=\color{black},
  %
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\bfseries,
  stringstyle=\ttfamily,
  showstringspaces = false,
  commentstyle=\color{gray45},     
  %
  numbers=left,
  numbersep=15pt,
  numberstyle=\tiny,
  numberfirstline = false,
  breaklines=true,
  xleftmargin=\parindent
}

\captionsetup[lstlisting]{font=small, labelsep=period}
% fijamos el estilo a utilizar 
\lstset{style=estilo}
\renewcommand{\lstlistingname}{\uppercase{Código}}

\pgfplotsset{compat=1.17} 
%-------------
% DOCUMENTO
%-------------

\begin{document}
\pagenumbering{roman} % Se utilizan cifras romanas en la numeración de las páginas previas al cuerpo del trabajo

%----------
% PORTADA
%---------- 
\begin{titlepage}
	\begin{sffamily}
		\color{azulUC3M}
		\begin{center}
			\begin{figure}[H] % incluimos el logotipo de la Universidad
				\makebox[\textwidth][c]{\includegraphics[width=16cm]{Portada_Logo.png}}
			\end{figure}
			\vspace{2.5cm}
			\begin{Large}
				Grado en Ingeniería Informática\\
				2021-2022\\
				\vspace{2cm}
				\textsl{Apuntes}\\
				\bigskip
			\end{Large}
			{\Huge Algoritmos Genéticos y Evolutivos}\\
			\vspace*{0.5cm}
			\rule{10.5cm}{0.1mm}\\
			\vspace*{0.9cm}
			{\LARGE Jorge Rodríguez Fraile\footnote{\href{mailto:100405951@alumnos.uc3m.es}{Universidad: 100405951@alumnos.uc3m.es}  |  \href{mailto:jrf1616@gmail.com}{Personal: jrf1616@gmail.com}}}\\
			\vspace*{1cm}
		\end{center}
		\vfill
		\color{black}
		\includegraphics[width=4.2cm]{img/creativecommons.png}\\
		Esta obra se encuentra sujeta a la licencia Creative Commons\\ \textbf{Reconocimiento - No Comercial - Sin Obra Derivada}
	\end{sffamily}
\end{titlepage}

%----------
% ÍNDICES
%---------- 

%--
% Índice general
%-
\tableofcontents
\thispagestyle{fancy}

%--
% Índice de figuras. Si no se incluyen, comenta las líneas siguientes
%-
\listoffigures
\thispagestyle{fancy}

%--
% Índice de tablas. Si no se incluyen, comenta las líneas siguientes
%-
\listoftables
\thispagestyle{fancy}

%----------
% TRABAJO
%---------- 

\pagenumbering{arabic} % numeración con números arábigos para el resto de la publicación  


%----------
% COMENZAR A ESCRIBIR AQUI
%---------- 

\chapter{Información}

\section{Profesores}
\begin{quote}
	Magistral: Pedro Isasi, pedro.isasi@uc3m.es, 2.1.B13.

	Práctica: Yago Sáez, yago.saez@uc3m.es, 2.1.C13

	Miércoles clases Práctica / Jueves clase Magistral.
\end{quote}

Las tutorías solicitarlas por correo electrónico, si no responden en 24-48 horas volver a enviar el mensaje, mejor insistir que perder el tiempo ante posible perdida.

Se utilizará portátil en las clases prácticas, traerlo para ir resolviendo los ejercicios de programación.

\section{Objetivos}
\begin{itemize}
	\item Trataremos de aprender métodos para replicar fundamentos biológicos, mediante programación evolutiva (Veremos estrategias históricas de la evolución, como Darwin o Mendel), para resolver problemas del campo de la Inteligencia Artificial.
	\item Se estudiarán y analizarán distintas técnicas de computación evolutiva que se basan en distintos paradigmas biológicos.
	\item Lo que buscamos es ser capaces de entender cómo funciona la inteligencia de las personas o animales para ver cómo se desarrollan los procesos y poder programarlos para que hagan una tarea o aprendan a hacerla.
\end{itemize}

Un ejemplo de aplicación consiste en desarrollo de antenas que se generan según distintas mediciones de señal de manera que se extenderá en aquellas direcciones que la maximicen, también evitando las interferencias. Este ejemplo se basa en las plantas, en la manera que tienen de ir buscando la luz para poder obtener energía y seguir creciendo.

También se emplean muchas basadas en insectos por su corta vida, que permiten observar la evolución de una manera más rápida.

Inteligencia artificial (no hay una única definición): Disciplina que consiste en diseñar programas que son capaces de resolver problemas de manera similar a un humano (razonamiento, aprendizaje o creatividad), pero sin haberles programado el proceso que les permite resolverlo, mediante una serie de casos base. De manera que dándole unos datos sea capaz de resolverlo, aprende a resolverlos.

\section{Evaluación continua}
\begin{itemize}
	\item 3 prácticas a lo largo del curso, que podrían ser 2 prácticas y una extensión de la primera.
	      \begin{itemize}
		      \item Consistirán en la entrega de una memoria siguiendo unos puntos dados y el código.
		      \item Individuales, excepto la última que es en equipo. 1 punto, 1.5 y 2.5 puntos
	      \end{itemize}
	\item 2 pruebas de evaluación, 2,5 puntos cada una.
	\item Examen final no obligatorio, si no se presenta a este la nota final será la de evaluación continua. Si te presentas se pondera la nota final tal que el 0.25 es evaluación continua y el 0.75 la nota del examen final.
	      \begin{itemize}
		      \item Sin hacer el examen final:
		            \begin{itemize}
			            \item 25 \% Parcial 1
			            \item 25 \% Parcial 2
			            \item 10 \% Práctica 1
			            \item 15 \% Práctica 2
			            \item 25 \% Práctica 3
		            \end{itemize}
		      \item Haciendo el examen final
		            \begin{itemize}
			            \item 6,3 \% Parcial 1
			            \item 6,3 \% Parcial 2
			            \item 2,5 \% Práctica 1
			            \item 3,8 \% Práctica 2
			            \item 6,3 \% Práctica 3
			            \item 75 \% Examen final
		            \end{itemize}
	      \end{itemize}
\end{itemize}

\chapter{Tema 1: Introducción a los algoritmos de Computación Evolutiva}
\section{Teoría genética}
Este tema nos permite entender de donde surge la intención de tratar de imitar los comportamientos biológicos y las teorías evolutivas que hay, en particular la evolución. Lo que trataremos es de acercarnos a como la biología es capaz de crear sistemas complejos.

\subsection{Los cuatro pilares de la evolución}
Dobzhansky (1973): “nothing in biology makes sense except in the light of evolution”.

\begin{itemize}
	\item \textbf{Población:} El conjunto de individuos.
	\item \textbf{Diversidad:} Es la variedad de individuos, que difieren en cualquier cosa, la naturaleza es la que se encarga de mantenerla y tiende a generar nueva diversidad. Las leyes de la naturaleza se dirigen a crearla.
	\item \textbf{Herencia:} Esencial para que se puedan transmitir la información entre individuos.
	\item \textbf{Selección:} Debe producirse la muerte de algunos individuos para que pueda seguir adelante la evolución, es fundamental.
\end{itemize}

\subsection{Selección Natural}
No es selección de los mejores, es un proceso estocástico, pueden sobrevivir individuos no tan buenos individualmente  pero si para el colectivo, porque mejoren la reproducción media.

La evolución no tiene un objetivo, no es un progreso, solo se adapta a las circunstancias y al medio. No necesariamente una generación en mejor que la anterior.

Actúa en el aquí y ahora, lo que es bueno en términos reproductivos aquí o ahora, puede no selo allí o después.

La vida no tiende a la complejidad, hay muchos más individuos simples que complejos.

En el mejor de los casos, la combinación de variedad, herencia y selección puede incrementar “hoy” la proporción de individuos cuyos padres disponían de características más propicias “ayer”.

\subsection{De donde viene la diversidad}
Viene de que la reproducción NO es perfecta, esto permite que haya ciertas imperfecciones (muy poco frecuentes) que les hagan más viables reproductivamente y se transmitan a sus descendientes, eso genera diversidad al haber pequeñas variaciones.

Aquellas características que no son ventajosas, pero tampoco afectan negativamente, son transmitidas también.

Es cuestión de estadística que se produzcan las variaciones, pero este proceso repetido innumerables veces, genera diversidad.

Permite al individuo “ensayar” nuevas funcionalidades, comportamientos, morfologías, nuevos nichos y propagar a generaciones futuras aquellos que mejor se adapten al entorno.

\subsection{Escala Evolutiva}
La vida se dio muy al comienzo de la vida de la Tierra, pero se han dado muchas grandes extinciones, una vez la vida se da la vida se va sabiendo abrir camino.

3.500 Ma para generar los primeros seres eucariotas pluricelulares.

Solo 500 Ma para generar el resto de los seres vivos (80 \% contra 20 \%).

Los organismos microscópicos, similares a aquello que evolucionaron tempranamente continúan siendo altamente exitosos y dominan la Tierra.

La mayor parte de las especias y la biomasa terrestre está constituida por procariotas.

\subsection{Primeros pasos}
\textbf{Moléculas replicantes → poblaciones de moléculas en compartimentos}. Favorece la cooperación entre replicantes, al estar dentro de una membrana común

\textbf{Replicadores independientes → cromosomas}. Los replicadores independientes se unen formando estructuras, cromosomas, que facilitan su supervivencia

\textbf{ARN como gen y enzima → ADN y proteína}. Se separa la información de los procesos enzimáticos

\textbf{Nace el código genético}. División del trabajo, aumento en la complejidad de lo producido

\subsection{Estromatolitos (-3500 Ma)}
Agrupaciones de células unicelulares en forma de colonias capaces de generar con energía solar un gas tóxico, O$_2$, de forma masiva.

A pesar de este gas tóxico la vida se adaptó para utilizar ese oxígeno.

\subsection{Célula eucariota (-3500 Ma a -1200 Ma)}
\textbf{Procariota → Eucariota}. Aparece un núcleo celular, donde está la información y orgánulos, esto ayuda a la supervivencia de la célula.

\subsection{Organismos pluricelulares (-540)}
Antes del cámbrico había organismos simples, paquetes de proteínas autoreplicantes tipo medusa o esponjas habitando el mar.

Se alimentaban de bacterias o filtrando el agua, no había plantas.

\subsection{El Cámbrico}
Aparecen cadenas tróficas complejas (animales que comen otros animales), todos los grandes filos (grandes divisiones de la naturaleza) de la naturaleza (50 en el cámbrico, antes solo había 1 y después 8 más, tras esto solo quedaban 20).

Cambió la faz de la tierra y conformaron la vida tal y como lo conocemos hoy.

Ocurrió en solo 5 millones de años.

\subsection{Periodo Cámbrico}
Antes del cámbrico organismos simples, paquetes de proteínas autoreplicantes tipo medusas o esponjas habitando el mar.

Se alimentaban de bacterias o filtrando el agua. No había plantas.

Aparecen cadenas tróficas complejas (animales comen otros animales).

De repente aparecen todos los grandes filos de la naturaleza, 50 en el cámbrico, solo 1 antes y 8 después (solo quedan 20).

Mares casi inertes en mares repletos de vida. Cambió la faz de la tierra y conformaron la vida tal y como la conocemos hoy.

Ocurrió en solo 5 millones de años.

Causas ambientales. La escasez de recursos dio lugar a una competencia ecológica que favoreció la coevolución “depredador- presa”.

Causas geológicas. La separación de los continentes permite la segregación de las poblaciones y la diversificación evolutiva.

Causas morfológicas. Aparición del mesodermo.

Permite la generación de estructuras de colágeno (piel, cartílago, músculos).

Esqueletos rígidos (huesos, conchas).

Proliferación de oxígeno. Los animales no están obligados a obtener el oxígeno por todo el cuerpo, sino por órganos específicos, dejando el resto para caparazones o exoesqueletos.

\subsection{Seres complejos}
\textbf{Clones asexuales → Poblaciones sexuales}, es el mecanismo que guía el proceso, permite generar más individuos y diversidad de una manera eficaz. Aparece el sexo.

\textbf{Protista → Animales, plantas y hongos}. Aparece la diferenciación celular, todas las células tienen todo el material genético. Cada tipo de célula tiene activa una pequeña parte de su material genético. Empiezan a aparecer organismos.

\textbf{Individuos solitarios → Colonias}, conjunto de organismos que funcionan como uno. Organismos sociales.

\subsection{Últimos pasos}
-500 Ma plantas y hongos colonizan la tierra.

Poco después aparecieron artrópodos y otros animales

-300 Ma aparecen los anfibios.

Seguidos por los primeros amniotas (reproducción ovípara en medio seco terrestre)

-200 Ma Mamíferos.

-100 Ma Aves.

-2 Ma Hombre. Algo peculiar de los humanos y simios es que son consciente de su propia existencia a diferencia de otros animales.

\subsection{Las leyes de Mendel}
Hizo experimentos con guisantes entre 1857 y 1868. Publico su primer artículo en 1866.

Se fijó en dos características, la altura de la planta y la rugosidad del guisante.

Mendel cruzó artificialmente plantas altas con bajas, y siempre se producían plantas altas.

Después cruzó las plantas resultantes y obtuvo unas proporciones de 3 a 1.

Elaboró una teoría corpuscularia de la herencia, que decía que la herencia está en alguna parte del individuo codificada.

Envió los resultados a un científico famoso, Nageli, pero pasó desapercibido.

50 años después se redescubrió su teoría y fue aceptada.

\subsection{El código genético}
Watson y Crick descubrieron en 1951 la estructura en doble hélice del ADN: Adenia-Timina Guanina-Citosina.

Más tarde se descubrió el ARN. Igual excepto Uracilo en vez de timina.

\textbf{Cada tres bases (codón) → un aminoácido}

El ARN no tiene estructura fija en doble hélice. Puede doblarse de muchas formas.

Los pliegues le dan carácter de enzima, y es además portador de código genético.

Hay 4$^3$ = 64 posibles codones para 20 aminoácidos. Tres de ellos no codifican aminoácidos, sino controles (STOP).

Más de un codón codifica un mismo aminoácido. Los aminoácidos más numerosos son codificados por más codones, y parecidos. Esto evita las mutaciones destructivas.

Los aminoácidos forman las proteínas.

Las proteínas son enzimas que gobiernan todos los procesos químicos.

\subsection{La síntesis de proteínas}
El ARN no tiene estructura fija en doble hélice. Puede doblarse de muchas formas.

Los pliegues le dan carácter de enzima, y es además portador de código genético.

El ADN contiene el material genético, es copiado “en negativo” por el ARN-mensajero.

El ARN-mensajero pasa la información al ARN-de transferencia.

El ARN-de transferencia tiene una zona desplegada compuesta por tres bases y tiene adosado un aminoácido.

El ARN-t se “pega” al trozo de ARN-m complementario, cuando el anterior trozo ya ha sido leído, y deposita su aminoácido a continuación del anterior.

Este proceso se realiza en presencia de una enzima llamada ribozima.

\subsection{Definiciones}
\textbf{Gen:} La definición no es clara. Todo aquello que produzca de forma monolítica una característica en un individuo.

\textbf{Genotipo:} Es el conjunto de todos los genes. Es la secuencia de bases enumerada una detrás de otra

\textbf{Fenotipo:} Es la consecuencia física, psíquica, de comportamiento, o cualquier otra; de un determinado gen

\subsection{Reproducción}
Existen dos tipos de reproducción: asexual y sexual

La asexual es cuando un individuo por sí solo produce copias idénticas de él mismo.
\begin{itemize}
	\item P. ej. Las estrellas de mar
\end{itemize}

La sexual es cuando se necesitan dos individuos para producir un descendiente (o varios), y el resultado es un individuo cuyos genes son una mezcla de los de sus progenitores.

La reproducción sexual produce constantemente individuos diferentes y ayuda a la variedad genética

Se desconocen las causas de la aparición de la reproducción sexual Computacionalmente la reproducción sexual es mucho más potente

\subsubsection{Haploidad}
Tienen un solo juego de cromosomas.

Los individuos se reproducen por sí mismos.

La reproducción da lugar a individuos genéticamente idénticos al progenitor

\subsubsection{Diploidad}
Los cromosomas están pareados. Las células sexuales se generan mediante meiosis y son “haploides”, conteniendo información redundante e incluso contradictoria.

Los descendientes reciben un cromosoma de cada uno de los progenitores para formar un embrión diploide

\subsubsection{Haplo-Diploidad}
Unos individuos son haploides (machos) y otros diploides (hembras).
\begin{itemize}
	\item P. ej. Los insectos sociales
\end{itemize}
\pagebreak

\section{Conceptos de Computación Evolutiva}
La evolución se apoya en 4 pilares: Población, Diversidad, Herencia y Selección.
\subsection{Definición de CE}
\subsubsection{Qué es la Computación Evolutiva?}
Se parte de una \textbf{población que es un conjunto de soluciones} aparentes al problema que buscamos resolver. Se emplea en aquellos problemas que encontrar una solución no es difícil, ya que hay una cantidad enorme de alternativas, pero si una que sea buena y eficiente.

Buscamos \textbf{encontrar una solución que sea suficientemente buena} (encontrar la óptima es muy difícil y costoso), este concepto debe ser definido para saber cuándo se alcanza.

El problema tiene que poder describirse como un conjunto de estados/soluciones alternativas, \textbf{encontrar una buena representación} de las mismas.

Se debe poder \textbf{medir la calidad de cada solución} alternativa al problema, mediante una \textbf{función de fitness}, para saber si es válida.

Desde el punto de vista de optimización hay que generar soluciones cada vez mejores.

Desde el punto de vista de búsqueda se trata de buscar buenas soluciones en un espacio de búsqueda inmenso (como si fuera infinito).

La búsqueda se realiza de forma poblacional (un conjunto de individuos), no mediante trayectoria de un solo individuo.

\textbf{Son metaheurísticas}. La heurística es siempre la misma (universal) por eso se pueden aplicar a una variedad de problemas y construir heurísticas específicas.

La heurística es una \textbf{versión reducida de la selección natural}, combinación de los buenos candidatos, se generan individuos a partir de los previos y nos vamos quedando con los mejores.

Son \textbf{técnicas estocásticas}, para 2 ejecuciones se pueden observar distintas salidas, ya que por probabilidad no se han realizado las mismas operaciones. Esto permite evitar el estancamiento.
\pagebreak

\subsubsection{Evolución artificial}
Se basa en los mismos principios que la evolución natural
\begin{itemize}
	\item Mantenimiento de una \textbf{población}
	\item Creación de \textbf{diversidad}
	\item Un mecanismo de \textbf{selección}
	\item Un proceso de \textbf{herencia} genética
\end{itemize}
Se diferencia en que la evolución artificial es \textbf{orientada hacia una meta, no como la natural}.

Hay que obtener una \textbf{medida cuantitativa de la calidad del individuo (solución) para poder seleccionar al mejor y generar más copias} de los mejores individuos.

Es un proceso iterativo que finaliza cuando se ha obtenido un individuo lo suficientemente bueno.

\subsubsection{Procedimiento}
Se parte de una población inicial de soluciones aleatoria.
\begin{enumerate}
	\item Selección de progenitores, mediante la función de fitness evaluamos los individuos y aplicando reglas de selección escogemos una población de progenitores.
	\item Reproducción, las operaciones son estocásticas y aleatorias.
	\item Nueva población que se pasa por la función de fitness para ver si es mejor que la progenitora.
	\item Evaluación de la descendencia, que vuelve al paso 1.
\end{enumerate}

\subsubsection{Representaciones genéticas}
\textbf{Genotipo:} La codificación del individuo.

\textbf{Fenotipo:} El individuo en sí, su significado.
\pagebreak

Los individuos deben poder representarse de forma que:
\begin{itemize}
	\item El individuo pueda poder ser decodificado fácilmente (fenotipo).
	\item Se puedan generar nuevos individuos mediante combinaciones de los que ya existen.
	\item El conjunto de todos los posibles individuos debe coincidir lo máximo posible con el de todas las soluciones posibles, la codificación se debe ajustar a todo el espacio de soluciones (no solo a una pequeña parte)
	\item Se debe evitar que se codifiquen soluciones no válidas, atender a las limitaciones.
\end{itemize}
Encontrar una buena representación es el aspecto clave del algoritmo.

\textbf{Pueden ser:} Discretas (Algoritmos Genéticos), continuas(EE, Evolución Diferencial) o basadas en árboles(Programación genética)

\subsection{Población Inicial}
Se trata de generar una población de n individuos (soluciones) de dimensión k de forma aleatoria.

Si se tiene algún conocimiento previo para generar una buena población inicial usarlo, pero si no se emplea:
\begin{itemize}
	\item \textbf{Aleatoria uniforme:} Hay que tener en cuenta que habrá huevos en el espacio de soluciones no cubiertos, ya que es aleatorio. Genera valores aleatorios entre los rangos marcados para los valores del individuo.
	\item \textbf{Muestreo uniforme hipercúbico:} Para evitar que haya regiones más pobladas que otras se divide el espacio en n regiones iguales y se generan dentro de estos individuos aleatoriamente. De esta manera están más distribuidos uniformemente en el espacio.
	\item \textbf{Secuenciado simple inhibido:} Otra manera de buscar que este todo poblado es generar individuos que se encuentren al menos a una distancia mínima $\Delta$, se parte de un individuo aleatorio y se van generando más mientras están al menos a esa distancia del resto de individuos.
	\item \textbf{Heurística:} Emplea una heurística como podría ser la greedy.
\end{itemize}
\pagebreak

\subsection{Evaluación}
Los individuos son evaluados por su capacidad para resolver el problema

\textbf{Evaluación cuantitativa:} Se asigna un valor numérico.
\textbf{Evaluación cualitativa:} No se produce un valor numérico, sino por comparativa con el resto.

La función de evaluación es lo que más tiempo de cálculo consume, hay que simplificarla al máximo.

Se tiene que adaptar al problema la función de fitness, no a un caso específico, dado que el algoritmo producirá soluciones tratando de maximizar la evaluación de los individuos, y ningún otro factor.

Hay que estar seguro de que lo que queremos maximizar u obtener, está descrito con precisión en la función de evaluación.
\subsubsection{Paisaje de calidad}
El poder tener una \textbf{representación gráfica de la calidad de los individuos} permite estimar la complejidad del problema

Muestra el valor de calidad de todos los puntos del espacio de estados, que tiene que ser \textbf{estimación}.

Se puede calcular la calidad de los individuos que rodean a uno determinado, e intentar extrapolar en el resto del espacio.

\subsection{Selección}
La selección tiene como objetivo que los mejores individuos generen más descendentes que los peores

Se utiliza el término \textbf{presión selectiva} (cuando un individuo tiene mucho estrés encima para evolucionar, tiene competencia) como la cantidad de individuos diferentes que generarán descendencia.

Mucha presión selectiva indica que solo unos pocos generarán descendencia. Cuando no hay presión selectiva no necesita evolucionar sabe que podrá seguir igual.

\textbf{Tres tipos:}
\begin{itemize}
	\item \textbf{Selección proporcional o Ruleta:} La probabilidad de que un individuo sea seleccionado para reproducción es proporcional al cociente entre su valor de evaluación, y el total de la población.
	      $$p(i)=\frac{f(i)}{\sum^N_{i=1} f(i)}$$
	      \pagebreak

	      Este método no funciona bien en dos situaciones:
	      \begin{itemize}
		      \item Cuando un individuo es muy superior al resto (Problema del superindividuo), ya que estará sobrerepresentado y pierde diversidad.
		      \item Todos los individuos son igualmente válidos, todos tendrán la misma probabilidad y se aleatoriza la evolución. Por probabilidad unos individuos podrían ser seleccionados preferentemente.
	      \end{itemize}
	\item \textbf{Selección por rango o jerárquica:} Probabilidad en función de la posición que ocupa en orden de mayor evaluación. Evita los inconvenientes de la ruleta o selección proporcional. La probabilidad la da la posición no el valor de la evaluación.

	      Aunque un individuo sea muy superior no será una diferencia excesiva de probabilidad de selección, lo mismo si son parecidos. La presión selectiva vendrá dada por la diferencia entre posiciones y puede ser regulada.
	\item \textbf{Selección por rango o jerárquica truncada:} Se seleccionan una proporción de los mejores individuos, asignando la misma probabilidad de selección, y al resto cero.

	      Los mejores se reproducen aproximadamente el mismo número de veces, el resto no transmite su material genético.
	\item \textbf{Selección por torneos:} Consiste en realizar un torneo entre un número reducido de
	      individuos de la población, cada vez que haya que seleccionar. Se eligen T individuos de forma aleatoria uniforme y se selecciona el mejor, hay remplazo, es decir uno elegido puede volver a ser elegido.

	      Se repite el proceso tantas veces como individuos a seleccionar.

	      Cuanto más grande sea T más presión selectiva, se empieza con poca presión y se va aumentando más adelante.

	      No es necesaria función de evaluación, solo comparar individuos.

	      Es fácil pasar de exploración a explotación.

	      Permite mantener y regular la variabilidad genética.

	      Se elimina el efecto de los superindividuos.

	      Se ajusta fácilmente a problemas multiobjetivo.
\end{itemize}
\pagebreak

\subsection{Emparejamiento}
La reproducción es sexual, se realiza entre dos individuos, y la descendencia puede ser de un único individuo o de dos.

Los individuos se eligen de entre los seleccionados en el paso anterior según las siguientes maneras:
\begin{itemize}
	\item Se eligen ambos de manera aleatoria.
	\item El primero aleatoriamente, el segundo por afinidad (genotípica o fenotípica).
	\item Se selecciona el más afín, o el mejor de los que están a proximidad (vecindario), o aleatoriamente proporcional a la calidad de los que están a proximidad
\end{itemize}
Una vez reproducidos, los individuos no vuelven a ser utilizados de nuevo para reproducción.

\subsection{Reproducción}
\subsubsection{Recombinación}
\begin{itemize}
	\item \textbf{Discreta:} Se generan descendientes seleccionando una secuencia consecutiva de un progenitor, y la otra del otro.

	      100 101 y 010 110 dan 100110 y 010101
	\item \textbf{Uniforme:} Se generan descendientes seleccionando los genes homólogos de sus progenitores aleatoriamente. Se escoge aleatoriamente los genes teniendo en cuenta su posición.

	      10 01 01 y 01 01 10 dan 100110 y 010101.
	\item \textbf{Aritmética:} Se hace la media de los valores de los genes de los progenitores para generar un nuevo individuo.
	      0,2 0,6 1,2 y 0,4 0,4 1,0 dan 0,3 0,5 1,1
	\item \textbf{Secuencias:} El nuevo individuo mantiene la secuencia de los padres sin repetir valores. Se cogen secuencias de valores sin tener en cuenta la posición y van rellenando el progenitor.

	      ABCDEFG y GFCDBAE dan E BCD GFA (la AE del segundo)
	\item \textbf{Intermedia:} La recombinación aritmética genera siempre valores entre los de sus progenitores, esto reduce la variabilidad y hace converger hacia valores intermedios definidos aleatoriamente en la población inicial.

	      Esto se puede evitar permitiendo generar valores en un rango mayor al definido por los genes de los progenitores

	      No se realiza la media aritmética, sino un valor aleatorio en un rango extendido.

	      A partir de los valores de los genes de los progenitores, se obtiene un valor intermedio para cada descendiente

	      Para cada gen (i)
	      \begin{enumerate}
		      \item Se genera un valor aleatorio (a$_i$) en el intervalo [-d, 1+d], siendo d un parámetro del método.
		      \item Se asigna como valor del gen descendiente (z$_i$) la combinación de los valores de los genes homólogos de los progenitores (x$_i$, y$_i$). Se multiplica el gen del primer progenitor por a$_i$ y el del segundo por (1 - a$_i$) y se suman.
	      \end{enumerate}

	      Si d=0 los genes de los descendientes generarán valores intermedios de los de los progenitores, que sería como recombinación discreta. Para evitar que los valores converjan hacia dentro, se asignan valores de d>0 así sale de las fronteras de sus progenitores.
	\item \textbf{Lineal:} Igual que la recombinación intermedia, pero con el mismo valor de a para todos los genes. Permite generar valores de descendientes en la línea definida por sus progenitores.
\end{itemize}

\subsection{Inserción y remplazo}
Una vez seleccionados los individuos a reproducir, emparejados y generados sus descendientes, hay que decidir cómo se van a renovar las poblaciones.
\begin{itemize}
	\item Suponemos que el tamaño de la población debe permanecer constante de generación en generación, pero puede no ser así.
	\item \textbf{Política de inserción:} Qué individuos de los nuevos generados van a incluirse en la nueva generación.
	\item \textbf{Política de reemplazo:} Qué individuos de la población van a ser sustituidos por los nuevos.
\end{itemize}

\subsubsection{Estrategias de inserción}
Estrategia generacional:
\begin{itemize}
	\item \textbf{Generacional:} Se renueva toda la población al completo.
	\item \textbf{Generacional elitista:} Mantiene los n mejores individuos de una generación a la siguiente ($n \ll \#population$) y renueva los restantes.
	\item \textbf{Elitista puro:} El mejor individuo de la población pasa a la siguiente, el resto se renueva.
\end{itemize}

Estrategia de estado estacionario:
\begin{itemize}
	\item \textbf{Estado estacionario:} Se generan menos individuos del tamaño de la población y todos ellos se incluyen en la
	      generación siguiente.
	\item \textbf{Estado estacionario puro:} Solo se genera un individuo nuevo en cada generación y es insertado en la siguiente generación.
\end{itemize}
Para estas hay que decidir qué individuos de la población serán sustituidos por los nuevos generados, con Política de reemplazo.

\textbf{Inserción híbrida:} Se generan más individuos nuevos que los que tiene la población.
\begin{itemize}
	\item \textbf{Basada en fitness parcial:} Se seleccionan los n mejores individuos y se renueva la población por completo.
	\item \textbf{Basada en fitness:} Se seleccionan los mejores entre la población generada y la previa, de esta manera se renueva parcial o totalmente, depende del fitness.
\end{itemize}

\subsubsection{Estrategias de remplazo}
\begin{itemize}
	\item \textbf{Globales:} Considerando toda la población.
	      \begin{itemize}
		      \item Aleatoriamente
		      \item Los más antiguos de la población
		      \item Los peores de la población
		      \item Los más parecidos a los individuos a insertar
	      \end{itemize}
	\item \textbf{Locales:} De entre los que participan en la reproducción.
	      \begin{itemize}
		      \item Los nuevos reemplazan a sus progenitores. n individuos como progenitores sustituidos por los n individuos nuevos generados.
		      \item El peor. n progenitores generan m individuos nuevos (m<n), de manera que los nuevos sustituyen a los peores de los n progenitores.
		      \item El más parecido. n progenitores generan m individuos nuevos (m<n), de manera que los nuevos sustituyen a los más parecidos de los n progenitores
	      \end{itemize}
\end{itemize}

\subsection{Convergencia}
Criterios de parada
\begin{itemize}
	\item \textbf{Estática:} Se establece antes de empezar.
	      \begin{itemize}
		      \item Número de iteraciones (generaciones).
		      \item Número de evaluaciones.
		      \item Un determinado tiempo.
	      \end{itemize}
	\item \textbf{Dinámica:} En cada momento se evalúa si merece la pena detenerse o continuar.
	      \begin{itemize}
		      \item Ya no se generen mejores soluciones.
		      \item La diversidad genética caiga por debajo de cierto umbral.

		            Se calcula la semejanza genotípica entre todos los posibles pares de individuos de la población $D(P)=\sum_{i,j\in P} d(P_i, P_j)$.

		            En función de la representación puede ser distancia Hamming (discreta), distancia Euclídea (continúa) o diversidad de entropía $D(P)=\sum_{k=1}^l\sum_{\alpha \in A} f_k(\alpha)\log f_k(\alpha)$ (continúa no binaria).
		      \item La diversidad fenotípica caiga por debajo de un umbral.
		      \item Mejor individuo, se para sí no se encuentra después de n iteraciones un individuo mejor.
		      \item Evaluación media (nos permite ver si hay posibilidad de mejora), calcula la media de la evaluación de los individuos de la población y cuando no mejora o muy poco (debajo de un umbral) se para.
	      \end{itemize}
\end{itemize}

\chapter{Conceptos generales de algoritmos evolutivos}
\section{Elementos}
\textbf{Codificación:}
\begin{itemize}
	\item Individuo, cadena binaria que representa una solución al problema.
	\item Población, conjunto finito de soluciones.
\end{itemize}

\textbf{Operadores genéticos:} Reproducción, Cruce, Inversión y Mutación.

\textbf{Función de fitness:} Convierte un individuo en un valor real que evalúa la solución.

\section{Diseño de un AG}
Lo primero es plantearse si se puede resolver mediante esta técnica o no, si se puede entonces:
\begin{enumerate}
	\item \textbf{Modelar el problema:} Elegir una buena representación es muy importante y diseñar una función de evaluación.
	\item \textbf{Elegir los parámetros del método:} Que tipo de operaciones de selección y cruce, y asignar las tasas de probabilidad a los operadores.
\end{enumerate}

\section{Codificación}
\textbf{Debe cumplir:} Diseño eficaz de genes y Alfabeto mínimo.

\textbf{Gen:} Secuencia genómica que produce una característica fenotípica. Deben ser pequeño y no estar relacionados entre ellos.

\textbf{Codificación binaria:} Cadenas de caracteres binarios. Se pueden representar números enteros y reales, si se determina la precisión (x bits parte entra y z parte decimal).

\textbf{Codificación binaria Gray:} Cadenas de caracteres binarias en la que la distancia Hamming entre codificaciones adyacentes es 1. Es conveniente para que fenotipos adyacentes se correspondan con codificaciones adyacentes.

\textbf{Codificación Discreta no binaria:} Cuando para cada gen hay un número de alternativas no muy grande, pero mayor que dos. Esta alternativa evita dejar valores en binario sin significado.

\textbf{Codificación de reglas:} Si condición, entonces acción. Se codifican por un lado las condiciones y por otro las acciones, sin olvidar los operadores ($\le, \ge, \neq, =$). Las condiciones pueden ser números o atributos (se pone el valor del atributo, 1 o 0) y las acciones un conjunto predeterminado de valores.
\begin{itemize}
	\item simetría bilateral, cuerpo segmentado, exoesqueleto y patas articuladas $\rightarrow$ es un [artrópodo]
	\item Si Si Si Si 9
	\item 1 1 1 1 1001
\end{itemize}

\section{Operadores Genéticos}
\textbf{Selección}, simula la selección natural darwiniana hasta completar una población:
\begin{itemize}
	\item \textbf{Ruleta} (por valoración): Selecciona los individuos más aptos según la evaluación. Individuos con mayor evaluación generan mayor número de descendientes. La probabilidad de ser escogido es proporcional al fitness.

	      Problemas:
	      \begin{itemize}
		      \item Convergencia prematura: Aquellos individuos con una evaluación muy superior al resto tendrá muchos clones y la descendencia se parecerá mucho al progenitor, lo que lleva a que se estanque en una solución subóptima.
		      \item Estancamiento: Después de unas cuantas generaciones, todos los individuos tienen un valor de adecuación muy parecido entre ellos, por lo que hay baja presión selectiva al tener todos la misma probabilidad.
	      \end{itemize}
	\item \textbf{Jerárquica} (por posición): Se ordena la posición de mayor a menor fitness. Se selecciona al individuo proporcionalmente al rango que ocupa en la población. Maneras de calcular la probabilidad $P_i=\frac{p_i}{\sum_{j=1} p_j}$:
	      \begin{itemize}
		      \item Esquema lineal, $p_i=A\cdot i + B$
		      \item Esquema exponencial, $p_i=A\cdot e^{B\cdot i+C}$
	      \end{itemize}

	      Esto permite eliminar la influencia de individuos muy superiores al uniformizar las diferencias entre probabilidades por posición.
	\item \textbf{Torneos} (el mejor de un conjunto aleatorio de individuos).

	      El tamaño del torneo permite variar la presión selectiva, además mantiene y regula la variedad genética.

	      No necesita una función de evaluación, solo comparar individuos.

	      Eliminar el efecto de los superindividuos.
\end{itemize}

\textbf{Cruce/Reproducción}: Simula la reproducción sexual.
\begin{itemize}
	\item Se genera una población intermedia del mismo tamaño que la original, en la que tendrá más probabilidad de estar representados los mejores individuos.
	\item Puede ser: Simple (parte en 2), De dos puntos y Uniforme(cada gen tiene una probabilidad de cambiar por el del otro progenitor).
	\item El problema del incesto, si solo se hace cruce puede ocurrir que se pierdan alelos (todos los individuos tengan el mimo valor para un gen). En este caso se pierde rápidamente la variedad genética y se produce convergencia prematura. Por esto se introduce mutación.
\end{itemize}

\textbf{Inversión}, operador a medida, adecuado para ciertos dominios.

\textbf{Mutación}, simula las mutaciones que se producen en la reproducción.
\begin{itemize}
	\item  Elige aleatoriamente un gen y cambia su valor, por lo que pueden producirse muchas o ninguna mutación en un individuo.
	\item Se emplean frecuencias bajas, para ir explorando poco a poco, pero si es demasiado baja hay incesto.
	\item Evita la perdida de alelos y aleatoriza la búsqueda.
	\item Se comienza con valores mayores (exploración) y se va reduciendo para afinar las soluciones (explotación).
\end{itemize}

\section{Estrategias de reemplazo}
Dependiendo del tipo de reemplazamiento de los descendientes en la población, entre generaciones consecutivas, se distinguen dos tipos de Algoritmos Genéticos:
\begin{itemize}
	\item \textbf{Generacional:} Se reemplaza toda la población.
	\item \textbf{Estado Estacionario:} El reemplazamiento es parcial (n individuos). En este caso hay diferentes criterios de reemplazo:
	      \begin{itemize}
		      \item Los n individuos con peor valor de adecuación son sustituidos por los nuevos.
		      \item Los nuevos reemplazan a sus n progenitores.
		      \item Los individuos más parecidos. Cada individuo nuevo reemplaza a aquel cuya distancia Hamming sea menor.
	      \end{itemize}
	\item \textbf{Estado estacionario puro:} Se reemplaza un único individuo.
\end{itemize}

\section{Propiedades}
\subsection{Tamaño del espacio de búsqueda}
Los algoritmos genéticos son útiles para tamaños grandes, cuando no hay manera de obtener la solución óptima.

Los tiempos en explorar las soluciones aumenta exponencialmente.

Son útiles a partir de un tamaño de entre 20 y 30, 2$^{20}$ y 2$^{30}$, los tamaños inferiores dan soluciones triviales y se pueden manejar.

Suponiendo que cada individuo tarda un milisegundo en evaluarse:
\begin{itemize}
	\item Tamaño 20; 2$^{20}$= 17,45 minutos.
	\item Tamaño 30; 2$^{30}$= 12,42 horas.
	\item Tamaño 50; 2$^{50}$= 35702 años.
\end{itemize}

\subsection{Codificación}
Es importante que trate de cumplir:
\begin{itemize}
	\item \textbf{Completitud:} Todas las soluciones deben poder ser codificadas.
	\item \textbf{Coherencia:} Únicamente representar soluciones factibles, para no perder el tiempo.
	\item \textbf{Uniformidad:} Todas las soluciones con la misma cantidad de codificaciones, no hay privilegiados con más de 1 código asociado.
	\item \textbf{Sencillez:} Fácil y rápida de aplicar la codificación.
	\item \textbf{Adyacencia:} Pequeños cambios en los individuos representan pequeños cambios en  la solución.
\end{itemize}

\subsection{Limitaciones}
\begin{itemize}
	\item \textbf{Representación:} El espacio de búsqueda solo se representa mediante cadenas binarias o discretas, puede que esta no sea la más conveniente para el problema.
	\item \textbf{Dependencias:} No considera las restricciones o dependencias del problema.
	\item \textbf{Opacidad:} Solo está guiado por la aptitud de los individuos, no incorpora ningún otro conocimiento.
	\item \textbf{Finitud:} Solo puede trabajar con poblaciones finitas no muy grandes.
\end{itemize}

\subsection{Problemas}
\begin{itemize}
	\item  Pérdida de \textbf{variabilidad genética}.
	\item  \textbf{Convergencia prematura}, estancamiento en mínimos locales.
	\item  Problema de \textbf{epístasis}.
	\item  Paisaje de la función de evaluación muy abrupto (\textbf{fitness landscape}).
	\item  Problema de \textbf{desorientación} (deception).
	\item  Problema de \textbf{deriva genética}.
\end{itemize}

\subsection{Variabilidad genética}
Es importante para evitar la convergencia prematura.

La generación de nuevos individuos se basa en la recombinación de los ya existentes.

La pérdida de variabilidad genética impide producir soluciones novedosas. Se pierde la capacidad de intercambio de información útil entre los individuos.

La similitud genética de los individuos indica el final del proceso de búsqueda.

Si la pérdida de variabilidad genética se produce en las primeras fases de la evolución se dice que hay convergencia prematura, que hace que el proceso se estanque en mínimos locales.

\subsection{Convergencia prematura}
En las fases tempranas de la evolución de un AG puede ocurrir que un individuo o un grupo de ellos obtengan una aptitud notablemente superior a los demás.

Riesgo de que se produzca una evolución en avalancha:
\begin{itemize}
	\item Al incrementar los individuos más aptos, la diversidad disminuye, la siguiente generación se favorece más de estos hasta que dominan toda la población (superindividuos).
	\item Los superindividuos llevan hacia un subóptimo, son los más aptos en cierto momento.
	\item Puede ser deseable, en la fase final del proceso.
\end{itemize}

\subsection{Epístasis}
Cuando la búsqueda se vuelve más aleatoria, por dependencias entre genes.

La heurística de los AGs se fundamenta en la adyacencia e independencia de la codificación:
\begin{itemize}
	\item Individuos genotípicamente parecidos producen fenotipos similares y viceversa.
	\item No existen interacciones entre los genes, son independientes.
\end{itemize}

Si la propiedad de adyacencia no se cumple, el proceso de búsqueda se hace menos heurístico.

Los nuevos individuos se generarán más aleatoriamente cuanto menos se cumpla la propiedad de adyacencia.

Si los genes dependen unos de otros, cuando se cambia el valor de uno, esto repercute en la característica fenotípica de otro. La búsqueda se hace también más aleatoria. Cuando esto ocurre se dice que la codificación tiene epístasis.

Esto es debido a la teoría de los bloques constructivos.

\subsection{Geografía de la función de evaluación}
Para que el AGs pueda encontrar una buena solución, los individuos deben tener evaluaciones suficientemente diferentes.  En caso contrario se dice que el paisaje de la función de evaluación es demasiado abrupto.

Lo ideal es que haya un punto o zona en la que se produzca una subida para ir escalando. Que sean más suave los puntos con buena evaluación.

Puede haber problema que sean muy abruptos y no se puedan hacer con AG.

\subsubsection{Función de evaluación abrupta}
La forma de la función de evaluación es muy abrupta, lo que hace que no haya suficiente presión selectiva para aproximarse sucesivamente al óptimo.

Es difícil saber si se va por buen camino, todos los valores son muy similares y tienen las mismas probabilidades de sobrevivir, excepto unos pocos muy cercanos a la óptima.

La búsqueda se convierte en un proceso aleatorio
\pagebreak

\subsection{Desorientación}
Al combinar dos buenos individuos se producen habitualmente individuos peores que ambos.

La teoría de los bloques constructivos necesita que se generen esquemas privilegiados.

Si bloques constructivos que generan por separado individuos buenos, al combinarse generan individuos peores, se dice que existe desorientación.

\subsection{Deriva genética}
Es un efecto estocástico que emerge del rol del muestreo aleatorio en la reproducción.

Se trata de un cambio aleatorio en la frecuencia de alelos de una generación a otra.

Existe una tendencia que te guía hacia soluciones no muy buenas.

Normalmente se da una pérdida de los alelos menos frecuentes y una fijación  de los más frecuentes, resultando una disminución en la diversidad genética de la población.

Los efectos de la deriva se acentúan en poblaciones de tamaño pequeño, y ocasionan cambios que no son necesariamente
adaptativos. Para evitarlo emplear poblaciones mayores.

\subsection{Control de la diversidad genética}
Para controlar la diversidad genética hay que actuar sobre el mecanismo de generación de descendientes.

Cuanto más se favorezca a los más aptos menor variedad se obtendrá, y aumenta el riesgo de perder la información de valor desarrollada por los individuos moderadamente aptos. Si no se favorece especialmente a los individuos más aptos, se obtendrá más diversidad a costa de hacer las etapas de selección menos eficaces.

A la mayor o menor tendencia a favorecer a los individuos más aptos se le llama presión selectiva, que es cuando un individuo tiene que luchar para pasar de generación.

La presión selectiva (PS) cuantifica el número esperado de descendientes que generó el mejor individuo de la población: $PS=\frac{f_{\max}}{\bar{f}}$. Es la relación entre el valor máximo de evaluación de toda la población y el valor medio.

Lo ideal son valores de presión selectiva alrededor de 1,5. Valores mayores generarán superindividuos, valores menores hacen la búsqueda más lenta. En caso extremo, si PS = 1, todos los individuos tienen idéntica evaluación y no existe ninguna presión selectiva

Para cuantificar la diversidad hay que calcular la frecuencia relativa y calcular su desviación típica:
$$fr_i=\frac{f_i}{\sum_{j=1}^n f_j} \quad D=\sqrt{\sum_{j=1}^n (fr_j-\bar{fr})^2}$$

Controlar el mecanismo de selección, introduciendo nuevos operadores (tipo torneos) que prevengan de superindividuos.

Cambiar la función de evaluación, de forma que suavice las diferencias entre los individuos.

Introducir mecanismo de control de edades, donde los individuos reducen su aptitud con la edad o simplemente desaparecen.

\chapter{Estrategias Evolutivas}

\section{Diferencias con los Algoritmos Genéticos}
En lugar de tener codificación en binario, se tienen valores reales, no son valores discretos, sino continuos.

Al no ser discretos, no podemos hacer mutación discreta, en su lugar se hace mutación gaussiana N(0, $\sigma$).

En los algoritmos genéticos el elemento heurístico era cruce y en las estrategias evolutivas es la mutación.

\section{Tipos}
\begin{itemize}
	\item Dependiendo del tamaño de la población, si está compuesta por uno o más individuos.
	\item Por la forma en las que las nuevas generaciones son generadas.
\end{itemize}

\section{(1+1)-EE}
Las poblaciones se mantienen en tamaño a lo largo de las generaciones.
\begin{itemize}
	\item Si es con + se genera 1 individuo y hay 1 individuo en la población, de entre los 2 individuos se coge el más conveniente.
	\item Si es con , si se genera 1 y hay 1 solo se considera el más nuevo OIR
\end{itemize}
Es un método de escalada puro.

La población está compuesta por un solo individuo $(a_1^t)$, que variara entre generaciones según: $P^t=(a^t_1)=((x^t_1, \sigma^t_1))$.

El individuo está formado por dos vectores de número reales: 
\begin{itemize}
	\item Vector de la codificación $x^t$, codifica una solución al problema.
	\item Vector de varianzas $\sigma^t$, nos indica como de alejada se encuentra la solución de la solución óptima.
\end{itemize}

\subsection{Mutación}
En cada generación t se produce una población intermedia de 2 individuos, el individuo nuevo es generado  mediante mutación.
$$P'^t=(a^t_1,a^t_2)\in I \times I$$
$$a^t_2=m(P^t)=(x^t_2, \sigma^t_2))$$

El operador de mutación actúa de forma diferente con cada parte del individuo:
\begin{itemize}
	\item Vector de codificación, se produce mutación mediante distribución gaussiana.
	
	A cada elemento del vector se le aplica una variación obtenida de forma aleatoria siguiendo una distribución gaussiana: $x^t_2=x^t_1+N_0(\sigma^t_2)$.

	La distribución normal generará valores cercanos al cero, tanto positivos como negativos, con una probabilidad tanto más grande cuanto menor sea el valor de $\sigma$. De esta manera se irán ajustando poco a poco.
	\begin{itemize}
		\item Sigma pequeño, explotación.
		\item Sigma grande, exploración.
	\end{itemize}

	Se genera una nube gaussiana de probabilidad de encontrar el individuo en una determinada posición, después de la mutación la probabilidad se concentra en torno a la posición actual del individuo. Su dispersión viene dada por el valor de $\sigma$

	\item Vector de varianzas, se muta según la regla del 1/5.
	
	Cuanto más lejos de solución óptima es más probable que se produzca una mejora, y cuanto más cerca menos probable.
	
	Por lo que si se mejora de forma constante es que estoy lejos de la solución (fácilmente mejorable) y se hará el sigma más grande, cuando cuesta más hacer mejoras estoy cerca (difícilmente mejorable) y reduzco su valor.
\end{itemize}

\subsection{Regla del 1/5}
Se almacena en $\psi^t_s$ la proporción de veces que la población ha cambiado en las últimas generaciones.

Se aplica:
$$\sigma^{t+n} = \begin{cases} 
	c \cdot \sigma^t & \textit{si }\psi^t_s < \frac{1}{5} \textit{ reduce}\\
	\frac{\sigma^t}{c} & \textit{si }\psi^t_s > \frac{1}{5} \textit{ aumenta}\\
	\sigma^t & \textit{si }\psi^t_s = \frac{1}{5}  \textit{ mantiene}
 \end{cases}$$

Es necesario que $c<1$. El valor se obtiene experimentalmente, pero se recomienza un valor en torno a 0,82.

Esta regla asegura la convergencia del método:
\begin{itemize}
	\item Si las varianzas aumentan, se están obteniendo soluciones cada vez mejores y en algún momento se encontrara el óptimo 
	\item Si se encuentra el óptimo, las siguientes soluciones serán peores, y la varianza decrecerá hasta cero 
	\item Si no se encuentra el óptimo, las soluciones no mejorarán, y pasará lo mismo 
	\item Cuando la varianza es cero, no se generan nuevas soluciones.
\end{itemize}

\subsection{Evolución}
En la generación t+1, se evalúan los dos individuos de la población (1 previo y 1 nuevo) y se selecciona el mejor de los dos.

Por lo que si el nuevo es el mejor, la nueva población es el nuevo individuo, si no se mantienen la misma población.

$$P^{t+1}=s(P'^t)= \begin{cases} 
	a^t_2 & \textit{si } f(x^t_1)\leq f(x^t_2)\\
	a^t_1 = P^t & \textit{en caso contrario}
 \end{cases}$$

\section{EE Múltiples}
Ahora no solo tendremos poblaciones de 1 solo individuo.

Ahora sí se podrá utilizar el operador de sobrecruzamiento, por lo que habrá que definir uno para vectores de números reales.

Como se tienen más individuos ahora no se podrá utilizar la mutación con reglas 1/5, ya no hay una estadística de mejora para cada individuo.

\subsection{Cruce en EE}
Actúa de forma separada sobre el vector de codificación y varianza.

Se realiza sobre un conjunto de p individuos, normalmente 2, 3 o 4 individuos, para generar 1 nuevo individuo.

\begin{itemize}
	\item Vector de codificación, $\vec{x}'= \frac{1}{p}(\sum^p_{i=1}x_1^i,\sum^p_{i=1}x_2^i, ..., \sum^p_{i=1}x_\lambda^i)$, cada nuevo valor es la media de los valores de los progenitores.
	\item Vector de varianzas, se hace cruce posicional, tiene para cada varianza el valor de otro de los individuos aleatoriamente.
	
	$\vec{\sigma}'=(rnd(\sigma^1_1,\sigma^2_1, ..., \sigma^p_1), rnd(\sigma^1_2,\sigma^2_2, ..., \sigma^p_2), ..., rnd(\sigma^1_\lambda,\sigma^2_\lambda, ..., \sigma^p_\lambda))$
\end{itemize}

\subsection{Mutación en EE}
Vector de codificación, se hace de la misma manera, mediante distribución gaussiana, a cada elemento del vector se le aplica una variación obtenida de forma aleatoria siguiendo una distribución gaussiana: $x^t_2=x^t_1+N_0(\sigma^t_2)$.

Vector de varianzas, ya no se utiliza la regla de 1/5, sino que se va reduciendo poco a poco según un esquema Gaussiano. Se puede utilizar una de las siguientes: 
\begin{itemize}
	\item $\sigma'=\sigma \cdot e^{N(0,\tau)}$

	$\tau$ es la tasa de aprendizaje que toma un valor aproximado de $\tau \approx \frac{b}{\sqrt{2\cdot \sqrt{\lambda}}}$, donde $\lambda$ es la longitud de los individuos.
	\item $\sigma'=e^{N(0,\tau_0)}\cdot \sigma e^{N(0,\tau)}$
	
	Este es otro método donde introduce el parámetro $\tau_0$ cuyo valor es $\tau_0 = \frac{b}{\sqrt{2\cdot \lambda}}$
\end{itemize}

Se recomienda un valor de b aproximado de 1.

\subsection{Evolución}
Las poblaciones no tienen por qué tener el mismo tamaño, $\mu$ es el tamaño de la población y $\lambda$ es el tamaño de la población de nuevos individuos.

La selección se puede hacer por muestreo aleatoria simple (ruleta) o cualquier otro método similar.

Solapamiento: No se genera una población completa, los nuevos individuos sustituyen a algunos de los de la generación precedente.

Políticas de inserción y reemplazo: Hay que definir cómo se van a insertar los nuevos individuos y como se van a eliminar los sobrantes.

\subsection{Políticas de inclusión y reemplazo}
Si se generan $\lambda$ descendientes a partir de $\mu$ progenitores.
\begin{itemize}
	\item Reemplazo por inclusión $(\mu + \lambda)-E$: Se unen las poblaciones y se seleccionan los $\mu$ mejores según la función de adaptación.
	
	Los padres como los descendientes compiten para ser incluidos.
	\item Reemplazo por inserción $(\mu, \lambda)-E$: Los descendientes siempre pasan a la siguiente generación y sustituyen a los menos aptos.
	\begin{itemize}
		\item Si $\mu \leq \lambda$ se cogen de los $\lambda$ los $\mu$ mejores.
		\item Si $\mu \geq \lambda$ se eliminan de los $\mu$ $\lambda$ individuos para poder introducir los $\lambda$ nuevos.
	\end{itemize}
\end{itemize}

\section{Procedimiento $(1+1)-EE$}
\begin{enumerate}
	\item Generar aleatoriamente un vector de números reales y sus varianzas. Las varianzas tomarán valores grandes.
	\item Evaluar el individuo generado.
	\item Repetir hasta cumplir criterio de convergencia:
	\begin{enumerate}
		\item Generar una nueva solución a partir de la anterior mediante mutación, mutar el vector de codificación.
		\item Evaluar el individuo generado.
		\item Eliminar el individuo cuyo valor de adaptación sea menor.
		\item Si el individuo que queda es el nuevo, aumentar la frecuencia de éxitos, si no disminuirla.
		\item Mutar el vector de varianzas de acuerdo con la regla 1/5.
	\end{enumerate}
	
	\item Producir como resultado el individuo resultante
\end{enumerate}
\section{Procedimiento $(\mu, \lambda)-EE$}
\begin{enumerate}
	\item Generar aleatoriamente un conjunto de vectores de números reales y sus varianzas. Las varianzas tomarán valores grandes.
	\item Repetir hasta cumplir criterio de convergencia:
	\begin{itemize}
		\item Evaluar la población generada.
		\item Ordenar la población de forma decreciente al fitness.
		\item Repetir $\lambda$ veces:
		\begin{enumerate}
			\item Seleccionar 2, 3 o 4 individuos de forma proporcional a su fitness.
			\item Generar un nuevo individuo aplicando sobrecruzamiento, media para codificación y varianza aleatoria entre los progenitores.
			\item Mutar este último individuo.
		\end{enumerate}
		\item Generar una población intermedia con los $\lambda$ descendientes generados en el paso anterior.
		\item Eliminar de la población original los últimos $\lambda$ elementos, al estar ordenados.
		\item Generar una nueva población mediante la unión de la población original y la intermedia.
	\end{itemize}
	\item Producir como resultado el mejor individuo de la población.
	resultante
\end{enumerate}
\section{Procedimiento $(\mu + \lambda)-EE$}
\begin{enumerate}
	\item Generar aleatoriamente un conjunto de vectores de números reales y sus varianzas. Las varianzas tomarán valores grandes
	\item Repetir hasta cumplir criterio de convergencia:
	\item \begin{enumerate}
		\item Evaluar la población generada.
		\item Repetir $\lambda$ veces:
		\begin{enumerate}
			\item Seleccionar t individuos de forma proporcional al fitness.
			\item Generar un nuevo individuo aplicando sobrecruzamiento.
			\item Mutar este último individuo.
		\end{enumerate}
		\item Añadir a la población todos los elementos generados en el paso anterior. El tamaño de la población será ahora $\mu + \lambda$.
		\item Eliminar de la población los peores $\lambda$ elementos.
	\end{enumerate}
	\item Producir como resultado el mejor individuo de la población resultante.
\end{enumerate}

\end{document}